<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sondage - Partagez votre opinion !</title>
  
  <!-- Inclure Firebase via les CDN -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

  <script>
    // Configuration Firebase - Remplace ces valeurs par les tiennes
    const firebaseConfig = {
      apiKey: "AIzaSyDlXzH5rrIlxgsfEmyWee9BiMkW9D9sfH8",
      authDomain: "nemi-bd221.firebaseapp.com",
      databaseURL: "https://nemi-bd221-default-rtdb.europe-west1.firebasedatabase.app", // Remplace par ton URL de base de données Firebase
      projectId: "nemi-bd221",
      storageBucket: "nemi-bd221.firebasestorage.app",
      messagingSenderId: "320801299755",
      appId: "1:320801299755:web:c072c29c77d840b38d396e"
    };

    // Initialisation de Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database(app);
  </script>
</head>
<body>
  <h1>Sondage - Partagez votre opinion !</h1>

  <form id="surveyForm">
    <label for="question1">1. Quel est votre film préféré ?</label><br>
    <input type="text" id="question1" name="question1" required><br><br>

    <label for="question2">2. Avez-vous déjà utilisé notre produit ?</label><br>
    <select id="question2" name="question2" required>
      <option value="oui">Oui</option>
      <option value="non">Non</option>
    </select><br><br>

    <label for="question3">3. Comment évaluez-vous notre service ?</label><br>
    <input type="range" id="question3" name="question3" min="1" max="5" required><br><br>

    <button type="submit">Envoyer mes réponses</button>
  </form>

  <script>
    // Ajouter un événement au formulaire
    document.getElementById('surveyForm').addEventListener('submit', function(event) {
      event.preventDefault();  // Empêcher le formulaire de se soumettre normalement

      // Récupérer les réponses
      const question1 = document.getElementById('question1').value;
      const question2 = document.getElementById('question2').value;
      const question3 = document.getElementById('question3').value;

      // Créer un objet pour les réponses
      const responses = {
        question1: question1,
        question2: question2,
        question3: question3
      };

      // Ajouter les réponses à Firebase Realtime Database
      const newRef = database.ref('responses').push();  // "responses" est le nœud de la base de données
      newRef.set(responses)
        .then(() => {
          alert('Merci pour vos réponses !');
          window.location.href = 'confirmation.html';  // Redirection vers la page de confirmation
        })
        .catch((error) => {
          console.error('Erreur lors de l\'envoi des données : ', error);
        });
    });
  </script>
</body>
</html>
